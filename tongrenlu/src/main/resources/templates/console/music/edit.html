<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
  layout:decorator="console/layout">
  <head>
    <link th:href="@{/magicsuggest-2.0.5/magicsuggest-min.css}" rel="stylesheet" />
  </head>
  <body>
    <div class="container" layout:fragment="content">
      <div class="page-header">
          <h4 th:text="#{console.music.input}"></h4>
      </div>
      <form class="form-horizontal" th:action="@{/console/music/__${articleBean.id}__}" method="post" enctype="multipart/form-data">
        <div class="row">
            <div class="col-sm-8">
              <div th:class="${#strings.isEmpty(titleError)} ? 'form-group has-feedback' : 'form-group has-error has-feedback'">
                <label for="inputTitle" class="col-sm-2 control-label" 
                    th:text="#{ArticleBean.title}">Title</label>
                <div class="col-sm-10">
                  <input type="text" class="form-control" 
                    id="inputTitle" name="title"
                    th:value="${articleBean.title}"
                    th:placeholder="#{ArticleBean.title}"/>
                  <span class="glyphicon glyphicon-remove form-control-feedback"
                      th:unless="${#strings.isEmpty(titleError)}"></span>
                  <p class="help-block" 
                      th:unless="${#strings.isEmpty(titleError)}"
                      th:text="${titleError}"></p>
                </div>
              </div>
              <div th:class="${#strings.isEmpty(descriptionError)} ? 'form-group has-feedback' : 'form-group has-error has-feedback'">
               <label for="inputDescription" class="col-sm-2 control-label" 
                   th:text="#{ArticleBean.description}">Description</label>
                <div class="col-sm-10">
                  <textarea class="form-control" rows="20"
                   id="inputDescription" name="description"
                   th:text="${articleBean.description}"
                   th:placeholder="#{ArticleBean.description}"></textarea>
                  <span class="glyphicon glyphicon-remove form-control-feedback"
                     th:unless="${#strings.isEmpty(descriptionError)}"></span>
                  <p class="help-block" 
                     th:unless="${#strings.isEmpty(descriptionError)}"
                     th:text="${descriptionError}"></p>
                </div>
              </div>
              <div class="form-group">
               <label for="inputTag" class="col-sm-2 control-label" 
                   th:text="#{ArticleBean.tag}">Tag</label>
                <div class="col-sm-10">
                  <div id="magicsuggest"></div>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
                <div class="thumbnail">
                  <a href="javascript:;" >
                    <img src="http://placehold.it/400x400" alt="..." />
                  </a>
                  <div class="caption">
                    <input type="file" id="cover" name="cover" class="form-control" accept="image/jpeg,image/png" />
                  </div>
                </div>
            </div>
            <div class="col-sm-8">
              <div class="form-group">
                  <div class="col-sm-10 col-sm-offset-2">
                      <button type="submit" class="btn btn-primary" th:text="#{button.save}"></button>
                      <a th:href="@{/console/music}" class="btn btn-default" th:text="#{button.cancel}"></a>
                  </div>
              </div>
            </div>
        </div>
      </form>
    </div>
<th:block layout:fragment="scripts-libs">
<script th:src="@{/magicsuggest-2.0.5/magicsuggest-min.js}" ></script>
</th:block>
<th:block layout:fragment="scripts">
<script type="text/javascript" th:inline="javascript">
$(function() {
	var initValue = /*[[${tags}]]*/ [];
    var tagData = /*[[@{/tag/search}]]*/ '/tag/search';
	var placeHolder = /*[[#{console.tag.help}]]*/'Make a selection';
    $('#magicsuggest').magicSuggest({
    	name: 'tags',
    	method: 'get',
        data: tagData,
    	value: initValue,
        valueField: 'tag',
        hideTrigger: true,
        placeholder: placeHolder,
        typeDelay: 400
    });
});
</script>
</th:block>
  </body>
</html>